{% extends 'master.html' %}

{% block title %}
  SISTEMA MESTRADO
{% endblock %}

{% block content %}

    {% include "header.html" %}

    <h1>Filtrar Alunos</h1>

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
    

    <form method="get">
    <label for="turma">Turma:</label>
    <select id="turma" name="turma">
        <option value="">Todas</option>
        {% for turma in turmas %}
            <option value="{{ turma.id }}">{{ turma.nome }}</option>
        {% endfor %}
    </select>

    <label for="ano">Ano de Defesa:</label>
    <input type="number" id="ano" name="ano">

    <label for="docente">Docente Orientador:</label>
    <select id="docente" name="docente">
        <option value="">Todos</option>
        {% for docente in docentes %}
            <option value="{{ docente.id }}">{{ docente }}</option>
        {% endfor %}
    </select>

    <button type="submit">Filtrar</button>
    </form>

    {% if not messages %}

        {% if alunos %}
            <h2>Alunos Filtrados</h2>
            <ul>
            {% for aluno in alunos %}
                {%if aluno.defesa %}
                    <li>{{ aluno.nome }} {{ aluno.sobrenome }} - Defesa: {{ aluno.data_defesa|date:"d/m/Y" }}
                {%else%}
                    <li>{{ aluno.nome }} {{ aluno.sobrenome }} - NÃ£o defendeu.
                {%endif%}
            {% endfor %}
            </ul>
        {% else %}
            <p>Nenhum aluno encontrado.</p>
        {% endif %}

    {% endif %}

{% endblock %}