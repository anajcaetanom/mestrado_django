<!-- página inicial -->

{% extends "master.html" %}

{% block title %}   
    RELATÓRIOS MESTRADO
{% endblock %}


{% block content %}
  
    {% include "header.html" %}


    <div class="row">
        <div class="col"></div>

        <div class="col">
            <div class="container p-5 my-5 border"> 
                
                <div class="row mb-4">
                    <div class="col">
                        <!-- back button -->
                        <a href="/"> 
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
                            </svg>    
                        </a>
                    </div>


                    <div class="col-6">
                        <!-- titulo -->
                        <h2 class="text-center">
                            Relatórios
                        </h2>
                    </div>

                    
                    <div class="col"></div>                   

                    {% if messages %}
                        <ul class="messages">
                            {% for message in messages %}
                                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    
                    <form method="get">

                    <div class="my-3">
                        <label for="turma">Turma:</label>
                        <select id="turma" name="turma">
                            <option value="">Todas</option>
                            {% for turma in turmas %}
                                <option value="{{ turma.id }}">{{ turma.nome }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="ano">Ano de Defesa:</label>
                        <input type="number" id="ano" name="ano">
                    </div>

                    <div class="mb-3"> 
                        <label for="docente">Orientador:</label>
                        <select id="docente" name="docente">
                            <option value="">Todos</option>
                            {% for docente in docentes %}
                                <option value="{{ docente.id }}">{{ docente }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div class="mb-3"> 
                        <label for="situacao_all">Situação:</label>
                        <select id="situacao_all" name="situacao_all">
                            <option value="">Todas</option>
                            {% for situacao in situacao_all %}
                                <option value="{{ situacao.0 }}" {% if situacao.0 == situacao_selecionada %}selected{% endif %}>
                                    {{ situacao.1 }}
                                </option>
                            {% endfor %}
                        </select>
                    </div> 

                    <div class="my-3">
                        <button type="submit" class="btn btn-outline-primary">Filtrar</button>
                        </form>
                    </div>
                
                    {% if not messages %}

                        <div class="my-1">   
                            {% if alunos %}
                                
                                <h4>Dados:</h4>

                                <p> Total de alunos: {{ alunos_count }}
                                <ul class="list-group list-group-flush">
                                {% for aluno in alunos %}
                                    {%if aluno.situacao == 'E' %}
                                        {%if aluno.defesa %}
                                            <li class="list-group-item"><font color="01a800"> [Em andamento] </font> - {{ aluno.nome }} {{ aluno.sobrenome }} - Defesa: {{ aluno.data_defesa|date:"d/m/Y" }}
                                        {%else%}
                                            <li class="list-group-item"><font color="01a800"> [Em andamento] </font> - {{ aluno.nome }} {{ aluno.sobrenome }} - Não defendeu.</li>
                                        {%endif%}
                                    {%endif%}

                                    {%if aluno.situacao == 'J' %}
                                        {%if aluno.defesa %}
                                            <li class="list-group-item"><font color="a8a8a8"> [Jubilado] </font> - {{ aluno.nome }} {{ aluno.sobrenome }} - Defesa: {{ aluno.data_defesa|date:"d/m/Y" }}
                                        {%else%}
                                            <li class="list-group-item"><font color="a8a8a8"> [Jubilado] </font> - {{ aluno.nome }} {{ aluno.sobrenome }} - Não defendeu.</li>
                                        {%endif%}
                                    {%endif%}

                                    {%if aluno.situacao == 'D' %}
                                        {%if aluno.defesa %}
                                            <li class="list-group-item"><font color="ff0000"> [Desistente] </font> - {{ aluno.nome }} {{ aluno.sobrenome }} - Defesa: {{ aluno.data_defesa|date:"d/m/Y" }}
                                        {%else%}
                                            <li class="list-group-item"><font color="ff0000"> [Desistente] </font> - {{ aluno.nome }} {{ aluno.sobrenome }} - Não defendeu.</li>
                                        {%endif%}
                                    {%endif%}

                                    {%if aluno.situacao == 'T' %}
                                        {%if aluno.defesa %}
                                            <li class="list-group-item"><font color="ffa500"> [Trancado] </font> - {{ aluno.nome }} {{ aluno.sobrenome }} - Defesa: {{ aluno.data_defesa|date:"d/m/Y" }}
                                        {%else%}
                                            <li class="list-group-item"><font color="ffa500"> [Trancado] </font> - {{ aluno.nome }} {{ aluno.sobrenome }} - Não defendeu.</li>
                                        {%endif%}
                                    {%endif%}

                                    {%if aluno.situacao == 'C' %} 
                                        {%if aluno.defesa %}
                                            <li class="list-group-item"><font color="0000ff"> [Concluído] </font> - {{ aluno.nome }} {{ aluno.sobrenome }} - Defesa: {{ aluno.data_defesa|date:"d/m/Y" }}
                                        {%else%}
                                            <li class="list-group-item"><font color="0000ff"> [Concluído] </font> - {{ aluno.nome }} {{ aluno.sobrenome }} - Não defendeu.</li>
                                        {%endif%}
                                    {%endif%}

                                    
                                {% endfor %}
                                </ul>
                            {% else %}
                                <p>Nenhum aluno encontrado.</p>
                            {% endif %}
                        </div>
                
                    {% endif %}
                  

                </div> 
            </div>

        </div>

        <div class="col"></div>
    </div>

    
{% endblock %}
